!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EVSpace=t()}(function(){return function i(a,o,s){function n(r,t){if(!o[r]){if(!a[r]){var e="function"==typeof require&&require;if(!t&&e)return e(r,!0);if(f)return f(r,!0);throw(t=new Error("Cannot find module '"+r+"'")).code="MODULE_NOT_FOUND",t}e=o[r]={exports:{}},a[r][0].call(e.exports,function(t){return n(a[r][1][t]||t)},e,e.exports,i,a,o,s)}return o[r].exports}for(var f="function"==typeof require&&require,t=0;t<s.length;t++)n(s[t]);return n}({1:[function(t,r,e){var{Vector:i,Matrix:a}=t("./src/types.js"),o=t("./src/angles.js")["Angles"],{Order:s,Axis:n,XYZ:f,XZY:h,YXZ:d,YZX:u,ZXY:c,ZYX:l,XYX:p,XZX:m,YXY:x,YZY:w,ZXZ:y,ZYZ:g}=t("./src/order.js"),{getMatrixAxis:E,getMatrixEuler:T,getMatrixFromTo:X,rotateAxisTo:A,rotateAxisFrom:N,rotateEulerTo:b,rotateEulerFrom:S,rotateMatrixTo:v,rotateMatrixFrom:Y,rotateOffsetTo:Z,rotateOffsetFrom:I}=t("./src/rotation.js"),t=t("./src/refframe.js")["ReferenceFrame"];r.exports={Vector:i,Matrix:a,Angles:o,Order:s,Axis:n,XYZ:f,XZY:h,YXZ:d,YZX:u,ZXY:c,ZYX:l,XYX:p,XZX:m,YXY:x,YZY:w,ZXZ:y,ZYZ:g,getMatrixAxis:E,getMatrixEuler:T,getMatrixFromTo:X,rotateAxisTo:A,rotateAxisFrom:N,rotateEulerTo:b,rotateEulerFrom:S,rotateMatrixTo:v,rotateMatrixFrom:Y,rotateOffsetTo:Z,rotateOffsetFrom:I,ReferenceFrame:t}},{"./src/angles.js":2,"./src/order.js":3,"./src/refframe.js":4,"./src/rotation.js":5,"./src/types.js":6}],2:[function(t,r,e){r.exports.Angles=class{#alpha;#beta;#gamma;constructor(t,r,e){if(isNaN(t))throw TypeError("alpha is not a number");if(isNaN(r))throw TypeError("beta is not a number");if(isNaN(e))throw TypeError("gamma is not a number");this.#alpha=t,this.#beta=r,this.#gamma=e}get alpha(){return this.#alpha}get beta(){return this.#beta}get gamma(){return this.#gamma}set alpha(t){if(isNaN(t))throw TypeError("value is not a number");this.#alpha=t}set beta(t){if(isNaN(t))throw TypeError("value is not a number");this.#beta=t}set gamma(t){if(isNaN(t))throw TypeError("value is not a number");this.#gamma=t}toString(t=-1,r=!1){let e,i,a;return a=r?(e=180*this.#alpha/Math.PI,i=180*this.#beta/Math.PI,180*this.#gamma/Math.PI):(e=this.#alpha,i=this.#beta,this.#gamma),0<=t&&(e=e.toFixed(t),i=i.toFixed(t),a=a.toFixed(t)),`[ ${e}, ${i}, ${a} ]`}toObject(){return{alpha:this.#alpha,beta:this.#beta,gamma:this.#gamma}}}},{}],3:[function(t,r,e){class i{#first=a.X_AXIS;#second=a.Y_AXIS;#third=a.Z_AXIS;constructor(t,r,e){if(!(t instanceof a.Direction))throw TypeError("first axis is not an Axis.Direction");if(!(r instanceof a.Direction))throw TypeError("second axis is not an Axis.Direction");if(!(e instanceof a.Direction))throw TypeError("third axis is not an Axis.Direction");this.#first=t,this.#second=r,this.#third=e}get first(){return this.#first}get second(){return this.#second}get third(){return this.#third}get(t){if(isNaN(t))throw TypeError("index is not a number");if(0==t)return this.#first;if(1==t)return this.#second;if(2==t)return this.#third;throw RangeError(`index is out of range (index = ${t})`)}toString(){return`[${this.#first.toString()}, ${this.#second.toString()}, ${this.#third.toString()}]`}toObject(){return{first:this.#first.value(),second:this.#second.value(),third:this.#third.value()}}}class a{static Direction=class{#val;constructor(t){if(isNaN(t))throw TypeError("axis direction is not a number");if(t<0||2<t)throw RangeError(`axis direction is out of bounds (val = ${t})`);this.#val=t}value(){return this.#val}toString(){return 0==this.#val?"X_AXIS":1==this.#val?"Y_AXIS":2==this.#val?"Z_AXIS":void 0}};static X_AXIS=new this.Direction(0);static Y_AXIS=new this.Direction(1);static Z_AXIS=new this.Direction(2)}var o=new i(a.X_AXIS,a.Y_AXIS,a.Z_AXIS),s=new i(a.X_AXIS,a.Z_AXIS,a.Y_AXIS),n=new i(a.Y_AXIS,a.X_AXIS,a.Z_AXIS),f=new i(a.Y_AXIS,a.Z_AXIS,a.X_AXIS),h=new i(a.Z_AXIS,a.X_AXIS,a.Y_AXIS),d=new i(a.Z_AXIS,a.Y_AXIS,a.X_AXIS),u=new i(a.X_AXIS,a.Y_AXIS,a.X_AXIS),c=new i(a.X_AXIS,a.Z_AXIS,a.X_AXIS),l=new i(a.Y_AXIS,a.X_AXIS,a.Y_AXIS),p=new i(a.Y_AXIS,a.Z_AXIS,a.Y_AXIS),m=new i(a.Z_AXIS,a.X_AXIS,a.Z_AXIS),x=new i(a.Z_AXIS,a.Y_AXIS,a.Z_AXIS);r.exports.Order=i,r.exports.Axis=a,r.exports.XYZ=o,r.exports.XZY=s,r.exports.YXZ=n,r.exports.YZX=f,r.exports.ZXY=h,r.exports.ZYX=d,r.exports.XYX=u,r.exports.XZX=c,r.exports.YXY=l,r.exports.YZY=p,r.exports.ZXZ=m,r.exports.ZYZ=x},{}],4:[function(t,r,e){const i=t("./types.js")["Vector"],{getMatrixEuler:a,rotateOffsetFrom:o,rotateOffsetTo:s}=t("./rotation.js"),n=t("./order.js")["Order"],f=t("./angles.js")["Angles"];r.exports.ReferenceFrame=class h{#order;#angles;#matrix;#offset;constructor(t,r,e=""){if(!(t instanceof n))throw TypeError("order is not an Order");if(!(r instanceof f))throw TypeError("angles is not an Angles");if(""!=e&&!(e instanceof i))throw TypeError("offset is not a Vector");this.#order=t,this.#angles=r,this.#offset=""!=e?e:"",this.#matrix=a(t,r)}get order(){return this.#order}get angles(){return this.#angles}get matrix(){return this.#matrix}get offset(){return this.#offset}set angles(t){if(!(t instanceof f))throw TypeError("angs is not an Angles");this.#angles=t,this.#matrix=a(this.#order,t)}set alpha(t){if(isNaN(t))throw TypeError("angle is not a number");this.#angles.alpha=t,this.#matrix=a(this.#order,this.#angles)}set beta(t){if(isNaN(t))throw TypeError("angle is not a number");this.#angles.beta=t,this.#matrix=a(this.#order,this.#angles)}set gamma(t){if(isNaN(t))throw TypeError("angle is not a number");this.#angles.gamma=t,this.#matrix=a(this.#order,this.#angles)}set offset(t){if(!(t instanceof i))throw TypeError("vec is not a Vector");this.#offset=t}rotateTo(t){if(t instanceof i)return""==this.#offset?t.multiply(this.#matrix):s(this.#matrix,this.#offset,t);throw TypeError("vector is not a Vector")}rotateFrom(t){if(t instanceof i)return""==this.#offset?this.#matrix.multiply(t):o(this.#matrix,this.#offset,t);throw TypeError("vector is not a Vector")}rotateToFrame(t,r){if(!(t instanceof h))throw TypeError("frame is not a ReferenceFrame");if(!(r instanceof i))throw TypeError("vector is not a Vector");let e;return e=""==this.#offset?this.#matrix.multiply(r):o(this.#matrix,this.#offset,r),""==t.#offset?e.multiply(t.#matrix):s(t.#matrix,t.#offset,e)}rotateFromFrame(t,r){if(!(t instanceof h))throw TypeError("frame is not a ReferenceFrame");if(!(r instanceof i))throw TypeError("vector is not a Vector");let e;return e=""==t.#offset?t.#matrix.multiply(r):o(t.#matrix,t.#offset,r),""==this.#offset?e.multiply(this.#matrix):s(this.#matrix,this.#offset,e)}}},{"./angles.js":2,"./order.js":3,"./rotation.js":5,"./types.js":6}],5:[function(t,r,e){const{Vector:i,Matrix:a}=t("./types.js"),o=t("./angles.js")["Angles"],{Order:s,Axis:n}=t("./order.js");function f(t,r){return t==n.X_AXIS?(e=r,i=Math.cos(e),e=Math.sin(e),new a([[1,0,0],[0,i,-e],[0,e,i]])):t==n.Y_AXIS?(e=r,i=Math.cos(e),e=Math.sin(e),new a([[i,0,e],[0,1,0],[-e,0,i]])):t==n.Z_AXIS?(t=r,r=Math.cos(t),t=Math.sin(t),new a([[r,-t,0],[t,r,0],[0,0,1]])):void 0;var e,i}function h(t,r){var e=f(t.first,r.alpha);return e.multiplyEqual(f(t.second,r.beta)),e.multiplyEqual(f(t.third,r.gamma)),e}r.exports.getMatrixAxis=function(t,r){if(!(t instanceof n.Direction))throw TypeError("axis is not an Axis.Direction");if(isNaN(r))throw TypeError("angle is not a number");return f(t,r)},r.exports.getMatrixEuler=function(t,r){if(!(t instanceof s))throw TypeError("order is not an Order type");if(r instanceof o)return h(t,r);throw TypeError("angles is not an Angles type")},r.exports.getMatrixFromTo=function(t,r,e,i){if(!(t instanceof s))throw TypeError("orderFrom is not an Order type");if(!(e instanceof s))throw TypeError("orderTo is not an Order type");if(!(r instanceof o))throw TypeError("anglesFrom is not an Angles type");if(i instanceof o)return e=e,i=i,t=h(t=t,r=r),e=r=h(e,i),i=[e.get(0,1),e.get(0,2),e.get(1,2)],e.set(0,1,e.get(1,0)),e.set(0,2,e.get(2,0)),e.set(1,2,e.get(2,1)),e.set(1,0,i[0]),e.set(2,0,i[1]),e.set(2,1,i[2]),r.multiply(t);throw TypeError("anglesTo is not an Angles type")},r.exports.rotateAxisTo=function(t,r,e){if(!(t instanceof n.Direction))throw TypeError("axis is not an Axis.Direction");if(isNaN(r))throw TypeError("angle is not a number");if(e instanceof i)return t=f(t,r),e.multiply(t);throw TypeError("vector is not a Vector")},r.exports.rotateAxisFrom=function(t,r,e){if(!(t instanceof n.Direction))throw TypeError("axis is not an Axis.Direction");if(isNaN(r))throw TypeError("angle is not a number");if(e instanceof i)return f(t,r).multiply(e);throw TypeError("vector is not a Vector")},r.exports.rotateEulerTo=function(t,r,e){if(!(t instanceof s))throw TypeError("order is not an Order");if(!(r instanceof o))throw TypeError("angles is not an Angles");if(e instanceof i)return t=h(t,r),e.multiply(t);throw TypeError("vector is not a Vector")},r.exports.rotateEulerFrom=function(t,r,e){if(!(t instanceof s))throw TypeError("order is not an Order");if(!(r instanceof o))throw TypeError("angles is not an Angles");if(e instanceof i)return h(t,r).multiply(e);throw TypeError("vector is not a Vector")},r.exports.rotateMatrixTo=function(t,r){if(!(t instanceof a))throw TypeError("matrix is not a Matrix");if(r instanceof i)return r.multiply(t);throw TypeError("vector is not a Vector")},r.exports.rotateMatrixFrom=function(t,r){if(!(t instanceof a))throw TypeError("matrix is not a Matrix");if(r instanceof i)return t.multiply(r);throw TypeError("vector is not a Vector")},r.exports.rotateOffsetTo=function(t,r,e){if(!(t instanceof a))throw TypeError("matrix is not a Matrix");if(!(r instanceof i))throw TypeError("offset is not a Vector");if(e instanceof i)return e.subtract(r).multiply(t);throw TypeError("vector is not a Vector")},r.exports.rotateOffsetFrom=function(t,r,e){if(!(t instanceof a))throw TypeError("matrix is not a Matrix");if(!(r instanceof i))throw TypeError("offset is not a Vector");if(e instanceof i)return t.multiply(e).add(r);throw TypeError("vector is not a Vector")}},{"./angles.js":2,"./order.js":3,"./types.js":6}],6:[function(t,r,e){class o{#data;constructor(t,r,e){if(t&&isNaN(t))throw TypeError("x component is not a number");if(r&&isNaN(r))throw TypeError("y component is not a number");if(e&&isNaN(e))throw TypeError("z component is not a number");this.#data=[t||0,r||0,e||0]}[Symbol.iterator](){let t=0,r=this.#data;return{next(){return{value:r[t],done:!(t++in r)}}}}add(t){if(t instanceof o)return new o(this.#data[0]+t.#data[0],this.#data[1]+t.#data[1],this.#data[2]+t.#data[2]);throw TypeError("rhs is not a Vector")}subtract(t){if(t instanceof o)return new o(this.#data[0]-t.#data[0],this.#data[1]-t.#data[1],this.#data[2]-t.#data[2]);throw TypeError("rhs is not a Vector")}multiply(i){if(i instanceof s){var t=new o;for(let e=0;e<3;e++){let r=0;for(let t=0;t<3;t++)r+=i.get(t,e)*this.#data[t];t.#data[e]=r}return t}if(isNaN(i))throw TypeError("rhs is not a Matrix or number");return new o(this.#data[0]*i,this.#data[1]*i,this.#data[2]*i)}divide(t){if(isNaN(t))throw TypeError("rhs is not a number");return new o(this.#data[0]/t,this.#data[1]/t,this.#data[2]/t)}addEqual(t){if(t instanceof o)return this.#data[0]+=t.#data[0],this.#data[1]+=t.#data[1],this.#data[2]+=t.#data[2],this;throw TypeError("rhs is not a Vector")}subtractEqual(t){if(t instanceof o)return this.#data[0]-=t.#data[0],this.#data[1]-=t.#data[1],this.#data[2]-=t.#data[2],this;throw TypeError("rhs is not a Vector")}multiplyEqual(i){if(!isNaN(i))return this.#data[0]*=i,this.#data[1]*=i,this.#data[2]*=i,this;if(i instanceof s){var a=Array.from(this.#data);for(let e=0;e<3;e++){let r=0;for(let t=0;t<3;t++)r+=i.get(t,e)*a[t];this.#data[e]=r}return this}throw TypeError("rhs is not a Matrix or number")}divideEqual(t){if(isNaN(t))throw TypeError("rhs is not a number");return this.#data[0]/=t,this.#data[1]/=t,this.#data[2]/=t,this}negative(){return new o(-this.#data[0],-this.#data[1],-this.#data[2])}get(t){if(isNaN(t))throw TypeError("index is not a number");if(t<0||2<t)throw RangeError(`index is out of bounds (index = ${t})`);return this.#data[t]}set(t,r){if(isNaN(t))throw TypeError("index is not a number");if(isNaN(r))throw TypeError("value is not a number");if(t<0||2<t)throw RangeError(`index is out of bounds (index=${t})`);this.#data[t]=r}magnitude(){return Math.sqrt(this.magnitude2())}magnitude2(){return this.#data[0]*this.#data[0]+this.#data[1]*this.#data[1]+this.#data[2]*this.#data[2]}normalize(){var t=this.magnitude();return this.#data[0]/=t,this.#data[1]/=t,this.#data[2]/=t,this}toString(t=-1){let r,e,i;return i=0<=t?(r=this.#data[0].toFixed(t),e=this.#data[1].toFixed(t),this.#data[2].toFixed(t)):(r=this.#data[0],e=this.#data[1],this.#data[2]),`[ ${r}, ${e}, ${i} ]`}toArray(){return Array.from(this.#data)}toObject(){return{x:this.#data[0],y:this.#data[1],z:this.#data[2]}}}class s{#data=Array(3).fill(new Array(3));constructor(e){if(null==e)this.#data=[[0,0,0],[0,0,0],[0,0,0]];else{if(this.#data=[...Array(3)].map(t=>Array(3)),3!=e.length)throw RangeError("arr must have 3 rows");for(let r=0;r<3;r++){if(3!=e[r].length)throw RangeError(`row ${r} must have 3 columns`);for(let t=0;t<3;t++){if(e[r][t]&&isNaN(e[r][t]))throw TypeError(`element [${r}][${t}] is not a number`);this.#data[r][t]=e[r][t]||0}}}}[Symbol.iterator](){let t=0,r=this.#data;return{next:function(){return{value:r[t],done:!(t++in r)}}}}add(e){if(!(e instanceof s))throw TypeError("rhs is not a Matrix");var i=new s;for(let r=0;r<3;r++)for(let t=0;t<3;t++)i.#data[r][t]=this.#data[r][t]+e.#data[r][t];return i}subtract(e){if(!(e instanceof s))throw TypeError("rhs is not a Matrix");var i=new s;for(let r=0;r<3;r++)for(let t=0;t<3;t++)i.#data[r][t]=this.#data[r][t]-e.#data[r][t];return i}multiply(a){if(a instanceof s){var t=new s;for(let i=0;i<3;i++)for(let e=0;e<3;e++){let r=0;for(let t=0;t<3;t++)r+=this.#data[i][t]*a.#data[t][e];t.#data[i][e]=r}return t}if(a instanceof o){var i=new o;for(let e=0;e<3;e++){let r=0;for(let t=0;t<3;t++)r+=this.#data[e][t]*a.get(t);i.set(e,r)}return i}if(isNaN(a))throw TypeError("rhs is not a Matrix, Vector or number");var e=new s;for(let r=0;r<3;r++)for(let t=0;t<3;t++)e.#data[r][t]=this.#data[r][t]*a;return e}divide(e){if(isNaN(e))throw TypeError("rhs is not a number");var i=new s;for(let r=0;r<3;r++)for(let t=0;t<3;t++)i.#data[r][t]=this.#data[r][t]/e;return i}addEqual(e){if(!(e instanceof s))throw TypeError("rhs is not a Matrix");for(let r=0;r<3;r++)for(let t=0;t<3;t++)this.#data[r][t]+=e.#data[r][t];return this}subtractEqual(e){if(!(e instanceof s))throw TypeError("rhs is not a Matrix");for(let r=0;r<3;r++)for(let t=0;t<3;t++)this.#data[r][t]-=e.#data[r][t];return this}multiplyEqual(a){if(a instanceof s){var o=JSON.parse(JSON.stringify(this.#data));for(let i=0;i<3;i++)for(let e=0;e<3;e++){let r=0;for(let t=0;t<3;t++)r+=o[i][t]*a.#data[t][e];this.#data[i][e]=r}}else{if(isNaN(a))throw TypeError("rhs is not a Matrix or number");for(let r=0;r<3;r++)for(let t=0;t<3;t++)this.#data[r][t]*=a}return this}divideEqual(e){if(isNaN(e))throw TypeError("rhs is not a number");for(let r=0;r<3;r++)for(let t=0;t<3;t++)this.#data[r][t]/=e;return this}negative(){var e=new s;for(let r=0;r<3;r++)for(let t=0;t<3;t++)e.#data[r][t]=-this.#data[r][t];return e}get(t,r){if(isNaN(t))throw TypeError("row index is not a number");if(isNaN(r))throw TypeError("column index is not a number");if(t<0||2<t)throw RangeError(`row index out of bounds (row = ${t})`);if(r<0||2<r)throw RangeError(`column index out of bounds (col = ${r})`);return this.#data[t][r]}set(t,r,e){if(isNaN(t))throw TypeError("row index is not a number");if(isNaN(r))throw TypeError("column index is not a number");if(isNaN(e))throw TypeError("val is not a number");if(t<0||2<t)throw RangeError(`row index out of bounds (row = ${t})`);if(r<0||2<r)throw RangeError(`column index out of bounds (col = ${r})`);this.#data[t][r]=e}toString(a=-1){var o=[];for(let i=0;i<3;i++){let t,r,e;e=0<=a?(t=this.#data[i][0].toFixed(a),r=this.#data[i][1].toFixed(a),this.#data[i][2].toFixed(a)):(t=this.#data[i][0],r=this.#data[i][1],this.#data[i][2]),o[i]=`[ ${t}, ${r}, ${e} ]`}return`[${o[0]}
${o[1]}
${o[2]}]`}toArray(){return JSON.parse(JSON.stringify(this.#data))}toObject(){return{r0:{c0:this.#data[0][0],c1:this.#data[0][1],c2:this.#data[0][2]},r1:{c0:this.#data[1][0],c1:this.#data[1][1],c2:this.#data[1][2]},r2:{c0:this.#data[2][0],c1:this.#data[2][1],c2:this.#data[2][2]}}}}r.exports.Vector=o,r.exports.Matrix=s},{}]},{},[1])(1)});
